webpackJsonp([51],{Gjck:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Fd2+"),n=a("6s/a"),s={data:function(){return{showPhoto:!1,images:[],showPopup:!1,pdf:"",fileList:[],uploadData:{jobnumber:"",state:"",recordid:""},path:"",pathName:"",showImg:!1,titleType:"",titleName:"",certificateLevel:"",certificateNumber:"",issuingUnit:"",startTime:"",endTime:"",remarks:"",minDate:new Date(2010,0,1),maxDate:new Date(2025,10,1),currentDate:new Date,showTime:!1,timeFlag:""}},created:function(){this.initData()},methods:{update:function(){var e=this;i.a.confirm({title:"提示",message:"确认提交修改？"}).then(function(){var t={titleType:e.titleType,titleName:e.titleName,certificateLevel:e.certificateLevel,certificateNumber:e.certificateNumber,issuingUnit:e.issuingUnit,startTime:e.startTime,endTime:e.endTime,remarks:e.remarks,recordid:e.$route.params.zData.id,jobnumber:localStorage.getItem("jobNum"),a0188:e.$route.params.zData.a0188,flag:1,filePath:e.path};e.startTime.split("-").join("")>e.endTime.split("-").join("")?Object(i.b)({type:"warning",message:"开始时间不得大于结束时间！"}):null==e.titleType||""==e.titleType||null==e.titleName||""==e.titleName||null==e.certificateLevel||""==e.certificateLevel||null==e.certificateNumber||""==e.certificateNumber||null==e.issuingUnit||""==e.issuingUnit||null==e.startTime||""==e.startTime||null==e.endTime||""==e.endTime?Object(i.b)({type:"danger",message:"您有必填写未填写，请填写后提交！"}):Object(n._3)(t).then(function(t){1e3==t.code?(Object(i.b)({type:"success",message:"已提交修改，进入待审核状态"}),e.$router.push({name:"perQualification"})):Object(i.b)({type:"danger",message:t.msg})})}).catch(function(){Object(i.b)({type:"danger",message:"已取消修改"})})},back:function(){var e=this;i.a.confirm({title:"提示",message:"确定撤回修改吗？"}).then(function(){var t={recordid:e.$route.params.zData.id,flag:1};Object(n.g)(t).then(function(t){1e3==t.code?(Object(i.b)({type:"success",message:"撤回成功"}),e.$router.push({name:"perQualification"})):Object(i.b)({type:"danger",message:"当前无提交的修改项，不可点击“撤回修改”"})})}).catch(function(){Object(i.b)({type:"danger",message:"取消撤回"})})},backHome:function(){this.$router.push({name:"perQualification"})},initData:function(){var e=this.$route.params.zData;this.titleType=e.titleType,this.titleName=e.titleName,this.certificateLevel=e.certificateLevel,this.certificateNumber=e.certificateNumber,this.issuingUnit=e.issuingUnit,this.startTime=e.startTime,this.endTime=e.endTime,this.remarks=e.remarks,this.path=e.filePath,this.pathName=e.pathName},startTimeClick:function(){this.timeFlag=0,this.showTime=!0},endTimeClick:function(){this.timeFlag=1,this.showTime=!0},confirm:function(e){1==this.timeFlag?(this.endTime=this.formatDate(e),this.startTime.split("-").join("")>this.endTime.split("-").join("")&&Object(i.b)({type:"warning",message:"开始时间不得大于结束时间！"})):this.startTime=this.formatDate(e);this.showTime=!1},cancel:function(){this.showTime=!1},formatDate:function(e){var t=e.getFullYear(),a=e.getMonth()+1;a=a<10?"0"+a:a;var i=e.getDate();return t+"-"+a+"-"+(i=i<10?"0"+i:i)},dialogOpen:function(){this.showImg=!0},handleRemove:function(e){var t=this,a={filePath:e.response.obj.path};Object(n.k)(a).then(function(e){1e3==e.code?t.pathName="":Object(i.b)({type:"danger",message:e.msg})})},handlePreview:function(e){console.log(e)},handSuccess:function(e){1001==e.code&&Object(i.b)({type:"warning",message:e.msg}),this.path=e.obj.path,this.pathName=e.obj.pathName},uploadFile:function(){this.uploadData.state=1,this.uploadData.recordid=this.$route.params.zData.id,this.uploadData.jobnumber=localStorage.getItem("jobNum")},seePdf:function(){null==this.path||""==this.path?Object(i.b)({type:"danger",message:"没有附件可查看哦~"}):-1==this.path.indexOf("pdf")?(this.showPhoto=!0,this.images.push(this.path)):window.open(this.path)},onClose:function(){this.images=[]}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("van-field",{attrs:{label:"职称类型：",placeholder:"必填"},model:{value:e.titleType,callback:function(t){e.titleType=t},expression:"titleType"}}),e._v(" "),a("van-field",{attrs:{label:"职称名称：",placeholder:"必填"},model:{value:e.titleName,callback:function(t){e.titleName=t},expression:"titleName"}}),e._v(" "),a("van-field",{attrs:{label:"证书等级：",placeholder:"必填"},model:{value:e.certificateLevel,callback:function(t){e.certificateLevel=t},expression:"certificateLevel"}}),e._v(" "),a("van-field",{attrs:{label:"证书号码：",placeholder:"必填"},model:{value:e.certificateNumber,callback:function(t){e.certificateNumber=t},expression:"certificateNumber"}}),e._v(" "),a("van-field",{attrs:{label:"颁发单位：",placeholder:"必填"},model:{value:e.issuingUnit,callback:function(t){e.issuingUnit=t},expression:"issuingUnit"}}),e._v(" "),a("van-field",{attrs:{label:"有效期起：",readonly:"",placeholder:"必填"},on:{click:e.startTimeClick},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),e._v(" "),a("van-field",{attrs:{label:"有效期止：",readonly:"",placeholder:"必填"},on:{click:e.endTimeClick},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}}),e._v(" "),a("van-field",{attrs:{label:"备注：",placeholder:"选填"},model:{value:e.remarks,callback:function(t){e.remarks=t},expression:"remarks"}}),e._v(" "),a("p",{staticStyle:{padding:"10px 10px 10px 16px",color:"#323233","border-bottom":"1px solid #eee","font-size":"14px"}},[a("span",{staticStyle:{"padding-right":"5px"}},[e._v("上传证书:")]),a("span",[a("van-button",{staticStyle:{"font-size":"12px",padding:"2px"},attrs:{type:"primary",color:"#ccc",size:"mini"},on:{click:e.dialogOpen}},[e._v("上传")])],1)]),e._v(" "),a("p",{staticStyle:{padding:"10px 10px 10px 16px",color:"#323233","border-bottom":"1px solid #eee","font-size":"14px"}},[a("span",{on:{click:e.seePdf}},[e._v("职业资格证书："),a("span",{staticStyle:{"border-bottom":"1px solid #ccc",padding:"2px"}},[e._v(e._s(e.pathName))])])]),e._v(" "),a("div",{staticClass:"btn"},[a("van-button",{staticStyle:{"font-size":"16px"},attrs:{type:"primary",size:"small",color:"#fc5f10"},on:{click:e.update}},[e._v("确认修改")]),e._v(" "),a("van-button",{staticStyle:{"font-size":"16px"},attrs:{type:"primary",size:"small",color:"#fc5f10"},on:{click:e.backHome}},[e._v("取消")])],1)],1),e._v(" "),a("van-popup",{style:{height:"50%"},attrs:{"get-container":"body","close-icon":"close",position:"bottom"},model:{value:e.showTime,callback:function(t){e.showTime=t},expression:"showTime"}},[a("van-datetime-picker",{attrs:{type:"date","min-date":e.minDate,"max-date":e.maxDate},on:{confirm:e.confirm,cancel:e.cancel},model:{value:e.currentDate,callback:function(t){e.currentDate=t},expression:"currentDate"}})],1),e._v(" "),a("van-popup",{style:{height:"50%"},attrs:{"get-container":"body",closeable:"","close-icon":"close",position:"bottom"},model:{value:e.showImg,callback:function(t){e.showImg=t},expression:"showImg"}},[a("div",{staticClass:"uploadbtn"},[a("div",{staticClass:"title"},[e._v("（请上传职业资格证书，上传内容需为图片或PDF格式）")]),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{action:"/kukacms/self/professional/uploadProfessionalFiles",data:e.uploadData,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handSuccess,multiple:"",limit:10,"file-list":e.fileList}},[a("el-button",{staticStyle:{background:"#fc5f10",border:"1px #fc5f10"},attrs:{size:"small",type:"primary"},on:{click:e.uploadFile}},[e._v("上传证书")])],1)],1)]),e._v(" "),a("van-popup",{style:{height:"90%"},attrs:{"get-container":"body",position:"top"},model:{value:e.showPopup,callback:function(t){e.showPopup=t},expression:"showPopup"}},[a("iframe",{attrs:{src:e.pdf,width:"100%",height:"100%"}})]),e._v(" "),a("van-image-preview",{attrs:{"get-container":"body",images:e.images,closeable:!0},on:{close:e.onClose},model:{value:e.showPhoto,callback:function(t){e.showPhoto=t},expression:"showPhoto"}})],1)},staticRenderFns:[]};var l=a("VU/8")(s,o,!1,function(e){a("dkO3")},"data-v-33785191",null);t.default=l.exports},MOB4:function(e,t,a){(e.exports=a("FZ+f")(!0)).push([e.i,"\nbody[data-v-33785191] {\n  -webkit-user-select: text; /* Chrome all / Safari all /opera15+*/\n  -moz-user-select: text; /* Firefox all */\n  -ms-user-select: text; /* IE 10+ */\n  user-select: text;\n}\n.btn[data-v-33785191] {\n  padding: 10px;\n  text-align: center;\n}\n.uploadbtn[data-v-33785191] {\n  padding: 60px 10px 0 10px;\n}\n.uploadbtn .title[data-v-33785191] {\n  padding: 15px;\n  line-height: 20px;\n  color: #f00;\n}\n.upload-demo[data-v-33785191] {\n  text-align: center;\n}","",{version:3,sources:["D:/员工自助/selfGive_mobile/src/views/personAffairs/updateQualification.vue"],names:[],mappings:";AACA;EACE,0BAA0B,CAAC,sCAAsC;EACjE,uBAAuB,CAAC,iBAAiB;EACzC,sBAAsB,CAAC,YAAY;EACnC,kBAAkB;CACnB;AACD;EACE,cAAc;EACd,mBAAmB;CACpB;AACD;EACE,0BAA0B;CAC3B;AACD;EACE,cAAc;EACd,kBAAkB;EAClB,YAAY;CACb;AACD;EACE,mBAAmB;CACpB",file:"updateQualification.vue",sourcesContent:["\nbody[data-v-33785191] {\n  -webkit-user-select: text; /* Chrome all / Safari all /opera15+*/\n  -moz-user-select: text; /* Firefox all */\n  -ms-user-select: text; /* IE 10+ */\n  user-select: text;\n}\n.btn[data-v-33785191] {\n  padding: 10px;\n  text-align: center;\n}\n.uploadbtn[data-v-33785191] {\n  padding: 60px 10px 0 10px;\n}\n.uploadbtn .title[data-v-33785191] {\n  padding: 15px;\n  line-height: 20px;\n  color: #f00;\n}\n.upload-demo[data-v-33785191] {\n  text-align: center;\n}"],sourceRoot:""}])},dkO3:function(e,t,a){var i=a("MOB4");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("ac57b18a",i,!0,{})}});
//# sourceMappingURL=51.1eb43ad7fc393173bc0e.js.map